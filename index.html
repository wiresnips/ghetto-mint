<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Ghetto-mint by wiresnips</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Ghetto-mint</h1>
          <h2></h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/wiresnips/ghetto-mint/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/wiresnips/ghetto-mint/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/wiresnips/ghetto-mint" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="dumb-as-bricks-financial-tracking" class="anchor" href="#dumb-as-bricks-financial-tracking"><span class="octicon octicon-link"></span></a>Dumb-as-bricks financial tracking</h1>

<p>Scrape your bank's website, shove your transaction history into a local database, render a breakdown into static html to serve on your home network (or whatever). I built ghetto-mint for myself because I wanted basic financial analytics, but I didn't want to have to trust Mint with my bank login.</p>

<h1>
<a name="some-assembly-required" class="anchor" href="#some-assembly-required"><span class="octicon octicon-link"></span></a>Some Assembly Required</h1>

<p>With that in mind, ghetto-mint is about as dumb as it could possibly be. The whole thing is less than 250 lines of ruby. The hope is that anyone comfortable with the language will be able to read the code and be confident that it isn't doing anything sneaky. Then they could retrofit the scraper code for their own financial institution and run their own financial analytics.</p>

<p>This is not a packaged solution, and it probably won't work out of the box. It's more like a <em>template</em> of a program than anything else.</p>

<h1>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h1>

<p>This is the bare minimum to get to a working setup on a totally fresh ubuntu system (12.04). The details and gotchas will probably vary from distro to distro. If you get things up and running on another OS, I'd love to hear the blow-by-blow, and post another guide.</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>sudo apt-get update
<span class="nv">$ </span>sudo apt-get install ruby1.9.1-dev build-essential mysql-server libmysqlclient-dev
<span class="nv">$ </span>sudo gem install mechanize mysql2
</pre></div>

<ul>
<li>ghetto-mint is not especially picky about the version of ruby, but you <em>do</em> want the '-dev' edition of whatever you take- the gems rely on it.</li>
<li>
<p>MySQL will want you to enter a root password. It'll be rather insistent about it, actually. If you create one instead of leaving it blank, you will need to let scraper.rb know what it is. Look for</p>

<div class="highlight highlight-ruby"><pre><span class="n">D</span> <span class="o">=</span> <span class="no">Mysql2</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="ss">username</span><span class="p">:</span> <span class="s2">"root"</span>
</pre></div>

<p>and update it to</p>

<div class="highlight highlight-ruby"><pre><span class="n">D</span> <span class="o">=</span> <span class="no">Mysql2</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="ss">username</span><span class="p">:</span> <span class="s2">"root"</span><span class="p">,</span> <span class="ss">password</span><span class="p">:</span> <span class="s2">"your-mysql-password"</span>
</pre></div>
</li>
</ul><p>Once that's all done, download ghetto-mint and unzip it somewhere. I'm going to assume for the rest of this guide that you put it in <code>~/Downloads</code>. Head over there and give it a whirl.</p>

<p>A note for the paranoid: it's distinctly possible that if you've gotten this far, you're about to run my code and tell it how to sign into your bank. This would be a good time to inspect it (there really isn't all that much of it) and satisfy yourself that it's innocent.</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span><span class="nb">cd</span> ~/Downloads/ghetto-mint-master
<span class="nv">$ </span>ruby scraper.rb
</pre></div>

<p>If everything went properly, you'll be prompted for your scotiabank login info. When you type, nothing will appear in the console. This is normal. If everything continues to go properly, it'll spew output all over your console (to prevent this, create a log/ folder before hand), including whatever transactions are currently visible in each of your accounts.</p>

<p>Next, we'll fire up a simple web-server and have a look at the report.</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span><span class="nb">cd </span>report
<span class="nv">$ </span>ruby -run -e httpd . -p 5000
</pre></div>

<p>Pop open a web browser and visit <code>localhost:5000</code> - you should see a simplistic breakdown of your last transactions. Anything that didn't fit a category is simply ignored. You'll almost certainly need to modify categorizer.rb to conform to your spending habits.</p>

<p>For the final trick, we'll set up a couple of cron jobs to keep everything up to date.</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>crontab -e
</pre></div>

<p>Add the following lines- the report server will start on boot, and ghetto-mint'll scrape your bank every eight minutes to keep the data fresh.</p>

<pre><code># update ghetto-mint before the cookies go stale
*/8 * * * * ruby /home/user-name/Downloads/ghetto-mint-master/scraper.rb --cookies-only

# launch ghetto-mint's report server on startup
@reboot cd /home/user-name/Downloads/ghetto-mint-master/report &amp;&amp; ruby -run -e httpd . -p 5000
</code></pre>

<p>Remember to modify the paths to match wherever you actually put ghetto-mint. The <code>--cookies-only</code> flag causes ghetto-mint to give up if it finds a login screen, instead of waiting around for user input - it'll only succeed if it's cookies can get it in.</p>
        </section>

        <footer>
          Ghetto-mint is maintained by <a href="https://github.com/wiresnips">wiresnips</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>